%!TEX root = ../main.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Links:
%
% Difficulty:
% Companies: 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{String to Integer}
\label{ch:string_to_int}
\section*{Introduction}
The problem discussed in this chapter is an extremely popular one often used as a warm-up question asked during the onsite interview as well as part of many online assessment exercices. It is important to ask the right questions to the interview so to make sure that the problem is understood well and that all the corner cases are handled properly. For instance the interviewer might ask  to take car care of negative numbers, but that might not be explicitly stated in the problem statement.

\section{Problem statement}
\begin{exercise}
Write a function that given a string $s$ containing only numbers (characters from the range [0-9]), parse it into its integer representation without using any library specific functions (like \texttt{atoi()} in C++ or  \texttt{Integer.parseInt()} in Java).
\end{exercise}


\begin{example}
	\hfill \\
	If $s$ ="12345", then the function should return the integer $12345$.	
\end{example}


\section{Clarification Questions}

\begin{QandA}
	\item \begin{questionitem} \begin{question} Does the function need to handle integer overflow?  \end{question} 	 
    \begin{answered}
		\textit{No, the input will never cause overflow.}
	\end{answered} \end{questionitem}

	\item \begin{questionitem} \begin{question} Can the string have leading zeros?  \end{question} 	 
    \begin{answered}
		\textit{Yes, the string might have one or more leading zeros.}
		\begin{example}
			\hfill \\
			If $s$ ="0000012345", then the function should return the integer $12345$.	
		\end{example}
	\end{answered} \end{questionitem}
	
\end{QandA}

\section{Discussion}
\label{string_to_int:sec:discussion}
This problem can be solved very eleganlty by just using the idea behind the decimal positional numeral systems.
In any positional number system, the ultimate numeric value of a digit is determined by the position it holds, not only by the digit itself. Take as an example the number $427$:  although $7$ is thought of as a larger number than 4, the $7$ is worth less than the $4$ in this instance because of its respective position within the number. The value of a digit $d$ at position $i$ is equal to $d\times 10^i$. Thus the value of the a number $n=d_0d_1 \ldots d_k$ is equal to $(d_0 \times 10^0) + (d_1 \times 10^1) + \ldots + (d_k \times 10^k)$.
Using this approach leading zeros are not a problem because they clearly do not contribute to the final result as $0 \times 10^x = 0$.
\begin{example}
	\hfill \\
	 $n$ ="22498" then its decimal value is equal to: $(2 \times 10^4) + (2 \times 10^3) + (4 \times 10^2) + (9 \times 10^1) + (8 \times 10^0) = 20000 + 2000 + 400 +90 +8 = 22498$
\end{example}

The idea above can be implemented by looping though the string from right to left and summing up each digit of the string at position $i$  multiplied by $10^i$ as shown in Listing \ref{list:string_to_int1}.

\lstinputlisting[language=c++, caption=C++ solution to the string to integer problem.,label=list:string_to_int1]{sources/string_to_int/string_to_int_solution1.cpp}


This is considered a good solution, as its complexity is linear in the size of the input string and handles leading zeros elegantly.

\subsection{Common Variation}
\begin{itemize}
	\item[-] Add support for negative numbers. One optional char which could either be + or -, at the beginning of the string  signals the sign. See Listing \ref{list:string_to_int_negative}.
	\item[-] Return $0$ when the answer does not fit into an int.
	\item[-] Raise an exception (or return a certain value) in case of bad input. For instance when letters are present in the string e.g. $s=123f456$.  
\end{itemize}

\lstinputlisting[language=c++, caption=C++ solution to the string to integer problem with negative number support.,label=list:string_to_int_negative]{sources/string_to_int/string_to_int_solution2.cpp}